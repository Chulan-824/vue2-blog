{"remainingRequest":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\src\\views\\Message\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\src\\views\\Message\\index.vue","mtime":1586184269605},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610873814290},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1610873812815},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610873814290},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1610873867195}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5hdiBmcm9tICIuLi8uLi9jb21wb25lbnRzL05hdiI7CmltcG9ydCBSaWNoVGV4dCBmcm9tICIuLi8uLi9jb21wb25lbnRzL1JpY2hUZXh0IjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vLi4vYXBpIjsKdmFyIHBvc3RJZkxvZ2luID0gcmVxdWVzdC5wb3N0SWZMb2dpbjsKdmFyIGNvbW1pdE1lc3NhZ2UgPSByZXF1ZXN0LmNvbW1pdE1lc3NhZ2U7CnZhciBfZ2V0TWVzc2FnZUxpc3QgPSByZXF1ZXN0LmdldE1lc3NhZ2VMaXN0Owp2YXIgY29tbWl0Q2hpbGRNZXNzYWdlID0gcmVxdWVzdC5jb21taXRDaGlsZE1lc3NhZ2U7CgpmdW5jdGlvbiB0b1R3byhudW0pIHsKICByZXR1cm4gKG51bSA8IDEwID8gIjAiIDogIiIpICsgbnVtOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lc3NhZ2UiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50TGlzdDogW10sCiAgICAgIHNraXA6IDAsCiAgICAgIGxpbWl0OiAwLAogICAgICBpZkxvZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBnZXRUaW1lOiBmdW5jdGlvbiBnZXRUaW1lKHZhbCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHZhbCk7CiAgICAgIHZhciBZWSA9IHRvVHdvKGRhdGUuZ2V0RnVsbFllYXIoKSksCiAgICAgICAgICBNTSA9IHRvVHdvKGRhdGUuZ2V0TW9udGgoKSArIDEpLAogICAgICAgICAgREQgPSB0b1R3byhkYXRlLmdldERhdGUoKSksCiAgICAgICAgICBoID0gdG9Ud28oZGF0ZS5nZXRIb3VycygpKSwKICAgICAgICAgIG0gPSB0b1R3byhkYXRlLmdldE1pbnV0ZXMoKSksCiAgICAgICAgICBzID0gdG9Ud28oZGF0ZS5nZXRTZWNvbmRzKCkpOwogICAgICByZXR1cm4gIiIuY29uY2F0KFlZLCAiXHU1RTc0IikuY29uY2F0KE1NLCAiXHU2NzA4IikuY29uY2F0KERELCAiXHU2NUU1ICIpLmNvbmNhdChoLCAiOiIpLmNvbmNhdChtLCAiOiIpLmNvbmNhdChzKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHZhbCkgewogICAgICBwb3N0SWZMb2dpbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS51c2VySW5mbykgewogICAgICAgICAgLy/nmbvpmYbkuobvvIzlsLHlj5HpgIHmlbDmja7liLDmlbDmja7lupMgLS0g5omn6KGM55WZ6KiA5o+Q5Lqk55qEYWpheAogICAgICAgICAgY29tbWl0TWVzc2FnZSh7CiAgICAgICAgICAgIHVzZXI6IHJlcy5kYXRhLnVzZXJJbmZvLl9pZCwKICAgICAgICAgICAgY29udGVudDogdmFsCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgbGF5ZXIubXNnKCfnlZnoqIDmiJDlip8nLCB7CiAgICAgICAgICAgICAgaWNvbjogMQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGF5ZXIubXNnKCfmnI3liqHlmajplJnor69+6K+356iN5ZCO5YaN6K+VJywgewogICAgICAgICAgICAgIGljb246IDIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/mnKrnmbvlvZUKICAgICAgICAgIGxheWVyLm1zZygn6K+35YWI55m75b2VJywgewogICAgICAgICAgICBpY29uOiAyCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAvL+acjeWKoeWHuumUmQogICAgICAgIGxheWVyLm1zZygn5pyN5Yqh5Zmo6ZSZ6K+vfuivt+eojeWQjuWGjeivlScsIHsKICAgICAgICAgIGljb246IDIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVwbHlDbGljazogZnVuY3Rpb24gcmVwbHlDbGljayhwSW5kZXgsIGNJbmRleCkgewogICAgICBpZiAocEluZGV4ID09PSB1bmRlZmluZWQpIHJldHVybjsKICAgICAgdmFyIHBhcmVudERhdGEgPSB0aGlzLmNvbW1lbnRMaXN0W3BJbmRleF07IC8v5pS55Y+YcGxhY2Vob2xkZXLnmoTlhoXlrrkKCiAgICAgIGlmIChjSW5kZXggIT09IHVuZGVmaW5lZCkgewogICAgICAgIC8v5Zue5aSN55qE5a2Q6K+E6K66CiAgICAgICAgdGhpcy5jb21tZW50TGlzdFtwSW5kZXhdLnJlcGx5LnJlVXNlciA9IHRoaXMuY29tbWVudExpc3RbcEluZGV4XS5jaGlsZHJlbltjSW5kZXhdLnVzZXIudXNlcjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+WbnuWkjeeahOeItuivhOiuugogICAgICAgIHRoaXMuY29tbWVudExpc3RbcEluZGV4XS5yZXBseS5yZVVzZXIgPSB0aGlzLmNvbW1lbnRMaXN0W3BJbmRleF0udXNlci51c2VyOwogICAgICB9IC8v5Lik5qyh54K555qE5ZCM5LiA5LiqCiAgICAgIC8v5LiN5piv5ZCM5LiA5LiqCgoKICAgICAgaWYgKHBJbmRleCA9PT0gcGFyZW50RGF0YS5yZXBseS5sYXN0SW5kZXhBcnJbMF0gJiYgY0luZGV4ID09PSBwYXJlbnREYXRhLnJlcGx5Lmxhc3RJbmRleEFyclsxXSkgewogICAgICAgIHBhcmVudERhdGEucmVwbHkuaWZTaG93ID0gZmFsc2U7CiAgICAgICAgcGFyZW50RGF0YS5yZXBseS5sYXN0SW5kZXhBcnIgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJlbnREYXRhLnJlcGx5LmlmU2hvdyA9IHRydWU7CiAgICAgICAgcGFyZW50RGF0YS5yZXBseS5sYXN0SW5kZXhBcnIgPSBbcEluZGV4LCBjSW5kZXhdOwogICAgICB9CiAgICB9LAogICAgY2hpbGRDb21taXQ6IGZ1bmN0aW9uIGNoaWxkQ29tbWl0KHBJbmRleCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/liKTmlq3nmbvlvZUKICAgICAgcG9zdElmTG9naW4oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEudXNlckluZm8pIHsKICAgICAgICAgIC8v55m76ZmG5LqG77yM5bCx5Y+R6YCB5pWw5o2u5Yiw5pWw5o2u5bqTIC0tIOaJp+ihjOeVmeiogOaPkOS6pOeahGFqYXgKICAgICAgICAgIGNvbW1pdENoaWxkTWVzc2FnZSh7CiAgICAgICAgICAgIHBhcmVudElkOiBfdGhpcy5jb21tZW50TGlzdFtwSW5kZXhdLl9pZCwKICAgICAgICAgICAgdXNlcjogcmVzLmRhdGEudXNlckluZm8uX2lkLAogICAgICAgICAgICBjb250ZW50OiBfdGhpcy5jb21tZW50TGlzdFtwSW5kZXhdLnJlcGx5LmNvbnRlbnQsCiAgICAgICAgICAgIHJlVXNlcjogX3RoaXMuY29tbWVudExpc3RbcEluZGV4XS5yZXBseS5yZVVzZXIKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSkgewogICAgICAgICAgICAgIC8vY29kZeS4jeS4ujDvvIzor4TorrrlpLHotKUKICAgICAgICAgICAgICBsYXllci5tc2cocmVzLmRhdGEubXNnLCB7CiAgICAgICAgICAgICAgICBpY29uOiAyCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy9jb2Rl5Li6MO+8jOivhOiuuuaIkOWKnwogICAgICAgICAgICAgIGxheWVyLm1zZygn6K+E6K665oiQ5YqfJywgewogICAgICAgICAgICAgICAgaWNvbjogMQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/mnKrnmbvlvZUKICAgICAgICAgIGxheWVyLm1zZygn6K+35YWI55m75b2VJywgewogICAgICAgICAgICBpY29uOiAyCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAvL+acjeWKoeWHuumUmQogICAgICAgIGxheWVyLm1zZygn5pyN5Yqh5Zmo6ZSZ6K+vfuivt+eojeWQjuWGjeivlScsIHsKICAgICAgICAgIGljb246IDIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaWZMb2RpbmcpIHJldHVybjsgLy/mlofmoaPpq5gKCiAgICAgIHZhciBjID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDsgLy/mu5rliqjpq5gKCiAgICAgIHZhciBhID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsgLy/lj6/op4bljLrpq5gKCiAgICAgIHZhciBiID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCiAgICAgIGlmIChhICsgYiA+PSBjIC0gMjAwKSB7CiAgICAgICAgdGhpcy5pZkxvZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRNZXNzYWdlTGlzdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuaWZMb2RpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldE1lc3NhZ2VMaXN0OiBmdW5jdGlvbiBnZXRNZXNzYWdlTGlzdChjYikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMubGltaXQgKz0gNTsKCiAgICAgIF9nZXRNZXNzYWdlTGlzdCh0aGlzLnNraXAsIHRoaXMubGltaXQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaXRlbS5yZXBseSA9IHsKICAgICAgICAgICAgICB1c2VyOiAiIiwKICAgICAgICAgICAgICAvL2lkCiAgICAgICAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgICAgICAgLy/lm57lpI3lhoXlrrkKICAgICAgICAgICAgICByZVVzZXI6ICIiLAogICAgICAgICAgICAgIC8v5a2X56ym5LiyCiAgICAgICAgICAgICAgZGF0ZTogIiIsCiAgICAgICAgICAgICAgLy/ml6XmnJ8KICAgICAgICAgICAgICBpZlNob3c6IGZhbHNlLAogICAgICAgICAgICAgIGxhc3RJbmRleEFycjogW10KICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMzLmNvbW1lbnRMaXN0ID0gZGF0YTsKICAgICAgICB9CgogICAgICAgIGNiICYmIGNiKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBjYiAmJiBjYigpOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5hdjogTmF2LAogICAgUmljaFRleHQ6IFJpY2hUZXh0CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRNZXNzYWdlTGlzdCgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8v5Y+R6YCB56ys5LiA5qyh6K+35rGCCiAgICAvL+ebkeWQrOa7muWKqOS6i+S7tgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMuaGFuZGxlU2Nyb2xsKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgLy/np7vpmaTnm5HlkKzmu5rliqjkuovku7YKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmhhbmRsZVNjcm9sbCk7CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"Message\">\r\n    <Nav></Nav>\r\n    <div class=\"main\">\r\n      <div class=\"content\">\r\n        <article>\r\n          <section>\r\n            <h2>留言板</h2>\r\n            <p>沟通交流，拉近你我！</p>\r\n            <RichText @Sub=\"handleSubmit\"></RichText>\r\n          </section>\r\n          <section>\r\n            <ul>\r\n              <li v-for=\"(item,index) in commentList\" :key=\"item._id\">\r\n                <div class=\"comment-parent\">\r\n                  <div class=\"p-img\" :style=\"{backgroundImage:'url('+item.user.photo+')'}\"></div>\r\n                  <div class=\"p-info\">\r\n                    <div class=\"p-name\">{{item.user.user}}</div>\r\n                    <div class=\"p-content\" v-html=\"item.content\"></div>\r\n                    <div class=\"p-time\">\r\n                      <span>{{item.date | getTime}}</span>\r\n                      <a @click=\"replyClick(index)\">\r\n                        {{(item.reply.lastIndexArr[0]===index && item.reply.lastIndexArr[1]===undefined)?\"收起\":\"回复\"}}\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"comment-child\" v-for=\"(childItem,childIndex) in item.children\"  :key=\"childItem.date + Math.random()\">\r\n                  <div class=\"c-img\"  :style=\"{backgroundImage:'url('+childItem.user.photo+')'}\"></div>\r\n                  <div class=\"c-info\">\r\n                    <div class=\"c-name\">\r\n                      <span class=\"name\">{{childItem.user.user}}</span>回复<span class=\"name\">{{childItem.reUser}}</span>\r\n                      <span>{{childItem.content}}</span>\r\n                    </div>\r\n                    <div class=\"c-time\">\r\n                      <span>{{childItem.date | getTime}}</span>\r\n                      <a @click=\"replyClick(index,childIndex)\">\r\n                        {{(item.reply.lastIndexArr[0]===index && item.reply.lastIndexArr[1]===childIndex)?\"收起\":\"回复\"}}\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div :class=\"['comment-reply',{'show':item.reply.ifShow}]\">\r\n                  <textarea v-model=\"item.reply.content\" :placeholder=\"'回复【'+item.reply.reUser+'】：'\"></textarea>\r\n                  <button @click=\"childCommit(index)\" type=\"button\" class=\"layui-btn layui-btn-xs\">提交</button>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </section>\r\n        </article>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Nav from \"../../components/Nav\";\r\n  import RichText from \"../../components/RichText\";\r\n  import request from \"../../api\"\r\n\r\n  const postIfLogin = request.postIfLogin;\r\n  const commitMessage = request.commitMessage;\r\n  const getMessageList = request.getMessageList;\r\n  const commitChildMessage = request.commitChildMessage;\r\n\r\n  function toTwo(num){\r\n    return (num<10?\"0\":\"\") + num;\r\n  }\r\n\r\n  export default {\r\n    name: \"Message\",\r\n    data(){\r\n      return {\r\n        commentList : [],\r\n\r\n        skip : 0,\r\n        limit : 0,\r\n        ifLoding : false\r\n      }\r\n    },\r\n    filters:{\r\n      getTime(val){\r\n        let date = new Date(val);\r\n\r\n        let YY = toTwo(date.getFullYear()),\r\n          MM = toTwo(date.getMonth()+1),\r\n          DD = toTwo(date.getDate()),\r\n          h = toTwo(date.getHours()),\r\n          m = toTwo(date.getMinutes()),\r\n          s = toTwo(date.getSeconds());\r\n\r\n        return `${YY}年${MM}月${DD}日 ${h}:${m}:${s}`;\r\n      }\r\n    },\r\n    methods : {\r\n      handleSubmit(val){\r\n\r\n        postIfLogin()\r\n          .then(res=>{\r\n            if (res.data.userInfo) {\r\n              //登陆了，就发送数据到数据库 -- 执行留言提交的ajax\r\n              commitMessage({\r\n                user : res.data.userInfo._id,\r\n                content : val\r\n              }).then(res=>{\r\n                layer.msg('留言成功', {icon: 1});\r\n                setTimeout(()=>{\r\n                  window.location.reload();\r\n                },1000);\r\n              }).catch(()=>{\r\n                layer.msg('服务器错误~请稍后再试', {icon: 2});\r\n              });\r\n\r\n            }else{\r\n              //未登录\r\n              layer.msg('请先登录', {icon: 2});\r\n            }\r\n          })\r\n          .catch(()=>{\r\n            //服务出错\r\n            layer.msg('服务器错误~请稍后再试', {icon: 2});\r\n          });\r\n\r\n      },\r\n      replyClick(pIndex,cIndex){\r\n\r\n        if (pIndex === undefined)return;\r\n\r\n        let parentData = this.commentList[pIndex];\r\n\r\n\r\n        //改变placeholder的内容\r\n        if (cIndex !== undefined) {\r\n          //回复的子评论\r\n          this.commentList[pIndex].reply.reUser = this.commentList[pIndex].children[cIndex].user.user;\r\n        }else{\r\n          //回复的父评论\r\n          this.commentList[pIndex].reply.reUser = this.commentList[pIndex].user.user;\r\n        }\r\n\r\n\r\n        //两次点的同一个\r\n        //不是同一个\r\n        if ((pIndex === parentData.reply.lastIndexArr[0] && cIndex === parentData.reply.lastIndexArr[1])) {\r\n          parentData.reply.ifShow = false;\r\n          parentData.reply.lastIndexArr=[];\r\n        }else{\r\n          parentData.reply.ifShow = true;\r\n          parentData.reply.lastIndexArr=[pIndex,cIndex];\r\n        }\r\n      },\r\n      childCommit(pIndex){\r\n        //判断登录\r\n        postIfLogin()\r\n          .then(res=>{\r\n            if (res.data.userInfo) {\r\n              //登陆了，就发送数据到数据库 -- 执行留言提交的ajax\r\n              commitChildMessage({\r\n                parentId : this.commentList[pIndex]._id,\r\n                user:res.data.userInfo._id,\r\n                content: this.commentList[pIndex].reply.content,\r\n                reUser : this.commentList[pIndex].reply.reUser\r\n              })\r\n                .then(res=>{\r\n                  if (res.data.code) {\r\n                    //code不为0，评论失败\r\n                    layer.msg(res.data.msg, {icon: 2});\r\n                  }else{\r\n                    //code为0，评论成功\r\n                    layer.msg('评论成功', {icon: 1});\r\n                    setTimeout(()=>{\r\n                      window.location.reload();\r\n                    },1000);\r\n                  }\r\n                })\r\n            }else{\r\n              //未登录\r\n              layer.msg('请先登录', {icon: 2});\r\n            }\r\n          })\r\n          .catch(()=>{\r\n            //服务出错\r\n            layer.msg('服务器错误~请稍后再试', {icon: 2});\r\n          });\r\n      },\r\n\r\n      handleScroll(){\r\n        if (this.ifLoding)return;\r\n\r\n        //文档高\r\n        let c = document.documentElement.offsetHeight;\r\n        //滚动高\r\n        let a = document.documentElement.scrollTop;\r\n        //可视区高\r\n        let b = document.documentElement.clientHeight;\r\n\r\n        if (a + b >= c - 200) {\r\n          this.ifLoding = true;\r\n          this.getMessageList(()=>{\r\n            this.ifLoding = false;\r\n          });\r\n        }\r\n      },\r\n      getMessageList(cb){\r\n        this.limit += 5;\r\n        getMessageList(this.skip,this.limit)\r\n          .then(res=>{\r\n            if (res.data.code === 0) {\r\n              let data = res.data.data;\r\n              data.forEach(item=>{\r\n                item.reply={\r\n                  user : \"\",//id\r\n                  content : \"\",//回复内容\r\n                  reUser : \"\",//字符串\r\n                  date : \"\",//日期\r\n                  ifShow : false,\r\n                  lastIndexArr : []\r\n                }\r\n              });\r\n              this.commentList = data;\r\n            }\r\n            cb && cb();\r\n          })\r\n          .catch(()=>{\r\n            cb && cb();\r\n          })\r\n      }\r\n    },\r\n    components:{\r\n      Nav,RichText\r\n    }\r\n\r\n    ,created() {\r\n      this.getMessageList();\r\n    }\r\n\r\n    ,mounted() {\r\n      //发送第一次请求\r\n\r\n\r\n      //监听滚动事件\r\n      window.addEventListener(\"scroll\",this.handleScroll);\r\n    }\r\n    ,destroyed() {\r\n      //移除监听滚动事件\r\n      window.removeEventListener(\"scroll\",this.handleScroll);\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .Message{\r\n    >.main{\r\n      box-sizing: border-box;\r\n      max-width: 1360px;\r\n      padding: 70px 50px;\r\n      margin: 0 auto;\r\n      >.content{\r\n        width: 100%;\r\n        background-color: #fff;\r\n        >article{\r\n          section:nth-child(1){\r\n            box-sizing: border-box;\r\n            width: 100%;\r\n            padding: 20px 15px;\r\n            >h2{\r\n              font-weight: 700;\r\n              font-size: 2rem;\r\n              text-align: center;\r\n            }\r\n            >p{\r\n              font-size: 1.25rem;\r\n              margin: 1rem 0;\r\n              text-align: center;\r\n            }\r\n          }\r\n          section:nth-child(2){\r\n            box-sizing: border-box;\r\n            padding: 20px 15px;\r\n            width: 100%;\r\n            >ul{\r\n              width: 100%;\r\n              >li{\r\n                padding: 20px 0;\r\n                border-bottom: 1px dotted #333;\r\n                .comment-parent{\r\n                  display: flex;\r\n                  .p-img{\r\n                    width: 45px;\r\n                    height: 45px;\r\n                    background-position: center center;\r\n                    background-size: cover;\r\n                  }\r\n                  .p-info{\r\n                    flex: 1;\r\n                    padding-bottom: 20px;\r\n                    border-bottom: 1px dotted #aaa;\r\n                    .p-name{\r\n                      overflow: hidden;\r\n                      color: #01aaed;\r\n                    }\r\n                    .p-content{\r\n                      padding: 2px 0 5px 0;\r\n                      min-height: 30px;\r\n                      font-size: 12px;\r\n                      word-break: break-all;\r\n                    }\r\n                    .p-time{\r\n                      font-size: 12px;\r\n                      color: #999;\r\n                      span{\r\n                        padding-left: 15px;\r\n                        padding-right: 15px;\r\n                      }\r\n                      a{\r\n                        color: blue;\r\n                        cursor: pointer;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                .comment-child{\r\n                  display: flex;\r\n                  box-sizing: border-box;\r\n                  width: 100%;\r\n                  padding-left: 50px;\r\n                  padding-top: 20px;\r\n                  .c-img{\r\n                    width: 45px;\r\n                    height: 45px;\r\n                    background-position: center center;\r\n                    background-size: cover;\r\n                  }\r\n                  .c-info{\r\n                    flex: 1;\r\n                    font-size: 12px;\r\n                    .c-name{\r\n                      .name{\r\n                        color: #01aaed;\r\n                        margin: 0 5px;\r\n                      }\r\n                    }\r\n                    .c-time{\r\n                      padding-left: 20px;\r\n                      padding-top: 5px;\r\n                      span{\r\n                        margin-right: 10px;\r\n                      }\r\n                      a{\r\n                        cursor: pointer;\r\n                        color: blue;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                .comment-reply{\r\n                  overflow: hidden;\r\n                  box-sizing: border-box;\r\n                  width: 100%;\r\n                  height: 0;\r\n                  padding-left: 50px;\r\n                  padding-top: 10px;\r\n                  transition: height .3s;\r\n                  &.show{\r\n                    height: 100px;\r\n                  }\r\n                  textarea{\r\n                    display: block;\r\n                    width: 100%;\r\n                    height: 60px;\r\n                    border-color: #aaa;\r\n                    padding: 10px;\r\n                    box-sizing: border-box;\r\n                    resize: none;\r\n                  }\r\n                  button{\r\n                    margin-top: 8px;\r\n                    display: block;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"sourceRoot":"src/views/Message"}]}