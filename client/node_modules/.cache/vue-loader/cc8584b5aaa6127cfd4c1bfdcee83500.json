{"remainingRequest":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\src\\components\\ArticleShow.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\src\\components\\ArticleShow.vue","mtime":1612444143250},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610873814290},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1610873813032},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1610873812815},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610873814290},{"path":"F:\\前端\\前端框架班教室\\vue\\vue教室课堂代码\\blog\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1610873867195}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi9hcGknCgpjb25zdCBnZXRBcnRpY2xlU2hvdyA9IHJlcXVlc3QuZ2V0QXJ0aWNsZVNob3c7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFydGljbGVTaG93IiwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICAvL+aWh+eroOaVsOaNrgogICAgICBhcnRpY2xlTGlzdCA6IFtdLAoKICAgICAgLy9uby1tb3Jl55qE5pi+56S65LiO5ZCmCiAgICAgIGlmTm9Nb3JlIDogZmFsc2UsCgogICAgICAvL+aYr+WQpuWcqOWKoOi9vQogICAgICBpZkxvZGluZyA6IGZhbHNlCiAgICB9CiAgfSwKCiAgZmlsdGVycyA6IHsKICAgIGRhdGUodmFsdWUpewogICAgICByZXR1cm4gdmFsdWUubWF0Y2goL14oXGR7NH0pLShcZHsxLDJ9KS0oXGR7MSwyfSkvKVszXTsKICAgIH0sCiAgICBtb250aCh2YWx1ZSl7CiAgICAgIHJldHVybiB2YWx1ZS5tYXRjaCgvXihcZHs0fSktKFxkezEsMn0pLShcZHsxLDJ9KS8pWzJdOwogICAgfSwKICAgIHllYXIodmFsdWUpewogICAgICByZXR1cm4gdmFsdWUubWF0Y2goL14oXGR7NH0pLShcZHsxLDJ9KS0oXGR7MSwyfSkvKVsxXTsKICAgIH0KICB9LAoKICBjb21wdXRlZDp7CiAgICBpZCgpewogICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB9CiAgfSwKCiAgd2F0Y2g6ewogICAgaWQoKXsKICAgICAgLy/lvZNpZOWPkeeUn+WPmOWMluaXtgogICAgICB0aGlzLmdldEFydGljbGVTaG93RnJlc2goKTsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7CiAgICB9CiAgfSwKCiAgbWV0aG9kczp7CiAgICBnZXRBcnRpY2xlU2hvd0ZyZXNoKCl7CiAgICAgIHRoaXMuaWZOb01vcmUgPSB0aGlzLmlmTG9kaW5nID0gZmFsc2U7CiAgICAgIGdldEFydGljbGVTaG93KHRoaXMuaWQsdHJ1ZSkudGhlbihyZXM9PnsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgCiAgICAgICAgdGhpcy5hcnRpY2xlTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVTY3JvbGwoKXsKCiAgICAgIGlmICh0aGlzLmlmTm9Nb3JlIHx8IHRoaXMuaWZMb2RpbmcpcmV0dXJuOwoKCiAgICAgIC8v5paH5qGj6auYCiAgICAgIGxldCBjID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDsKICAgICAgLy/mu5rliqjpq5gKICAgICAgbGV0IGEgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwogICAgICAvL+WPr+inhuWMuumrmAogICAgICBsZXQgYiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CgogICAgICBpZiAoYSArIGIgPj0gYyAtIDIwMCkgewogICAgICAgIHRoaXMuaWZMb2RpbmcgPSB0cnVlOwogICAgICAgIGdldEFydGljbGVTaG93KHRoaXMuaWQsZmFsc2UpLnRoZW4ocmVzPT57CiAgICAgICAgICB0aGlzLmlmTG9kaW5nID0gZmFsc2U7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpewogICAgICAgICAgICB0aGlzLmFydGljbGVMaXN0LnB1c2goLi4ucmVzLmRhdGEuZGF0YSk7CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy5pZk5vTW9yZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgLy/lj5HpgIHnrKzkuIDmrKHor7fmsYIKICAgIHRoaXMuZ2V0QXJ0aWNsZVNob3dGcmVzaCgpOwoKICAgIC8v55uR5ZCs5rua5Yqo5LqL5Lu2CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix0aGlzLmhhbmRsZVNjcm9sbCk7CiAgfQp9Cg=="},{"version":3,"sources":["ArticleShow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ArticleShow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"articleShow\">\r\n    <section v-for=\"item in articleList\">\r\n      <h5>\r\n        <span>【{{item.type}}】</span>\r\n        <router-link :to=\"'/Article/'+item._id\">{{item.title}}</router-link>\r\n      </h5>\r\n      <div class=\"time\">\r\n        <p class=\"date\">{{item.date | date}}</p>\r\n        <p class=\"month\">{{item.date | month}}<span>月</span></p>\r\n        <p class=\"year\">{{item.date | year}}</p>\r\n      </div>\r\n      <div class=\"content\">\r\n        <router-link :to=\"'/Article/'+item._id\" :style=\"{backgroundImage:'url('+item.surface+')'}\">\r\n          <i></i>\r\n        </router-link>\r\n        {{item.content}}\r\n      </div>\r\n      <div class=\"read-more\">\r\n        <router-link :to=\"'/Article/'+item._id\">继续阅读</router-link>\r\n      </div>\r\n      <div class=\"footer\">\r\n        <div class=\"fl\">\r\n          <i class=\"el-icon-s-promotion\"></i>\r\n          <span>{{item.tag}}</span>\r\n        </div>\r\n        <div class=\"fr\">\r\n          <span class=\"pv\">\r\n            <i class=\"el-icon-view\"></i>\r\n            <i>{{item.pv}}</i>\r\n          </span>\r\n          <span class=\"comment\">\r\n            <i class=\"el-icon-chat-dot-round\"></i>\r\n            <i>{{item.comment.length}}</i>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <div v-if=\"ifLoding\" class=\"loading\">\r\n      <span>加载中</span>\r\n      <svg viewBox=\"25 25 50 50\" class=\"circular\"><circle cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" class=\"path\"></circle></svg>\r\n    </div>\r\n    <p v-if=\"ifNoMore\" class=\"no-more\">哼╭(╯^╰)╮我也是有底线的！！</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import request from '../api'\r\n\r\n  const getArticleShow = request.getArticleShow;\r\n\r\n  export default {\r\n    name: \"ArticleShow\",\r\n    data(){\r\n      return {\r\n        //文章数据\r\n        articleList : [],\r\n\r\n        //no-more的显示与否\r\n        ifNoMore : false,\r\n\r\n        //是否在加载\r\n        ifLoding : false\r\n      }\r\n    },\r\n\r\n    filters : {\r\n      date(value){\r\n        return value.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)[3];\r\n      },\r\n      month(value){\r\n        return value.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)[2];\r\n      },\r\n      year(value){\r\n        return value.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)[1];\r\n      }\r\n    },\r\n\r\n    computed:{\r\n      id(){\r\n       return this.$route.params.id;\r\n      }\r\n    },\r\n\r\n    watch:{\r\n      id(){\r\n        //当id发生变化时\r\n        this.getArticleShowFresh();\r\n        document.documentElement.scrollTop = 0;\r\n      }\r\n    },\r\n\r\n    methods:{\r\n      getArticleShowFresh(){\r\n        this.ifNoMore = this.ifLoding = false;\r\n        getArticleShow(this.id,true).then(res=>{\r\n          console.log(res.data);\r\n          \r\n          this.articleList = res.data.data;\r\n        });\r\n      },\r\n\r\n      handleScroll(){\r\n\r\n        if (this.ifNoMore || this.ifLoding)return;\r\n\r\n\r\n        //文档高\r\n        let c = document.documentElement.offsetHeight;\r\n        //滚动高\r\n        let a = document.documentElement.scrollTop;\r\n        //可视区高\r\n        let b = document.documentElement.clientHeight;\r\n\r\n        if (a + b >= c - 200) {\r\n          this.ifLoding = true;\r\n          getArticleShow(this.id,false).then(res=>{\r\n            this.ifLoding = false;\r\n            let data = res.data.data;\r\n            if (data.length){\r\n              this.articleList.push(...res.data.data);\r\n            }else{\r\n              this.ifNoMore = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      //发送第一次请求\r\n      this.getArticleShowFresh();\r\n\r\n      //监听滚动事件\r\n      window.addEventListener(\"scroll\",this.handleScroll);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .articleShow{\r\n    >section{\r\n      overflow: hidden;\r\n      position: relative;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      padding: 20px 30px 25px;\r\n      margin-bottom: 20px;\r\n      background-color: #fff;\r\n      animation: show .5s 1;\r\n      animation-fill-mode: forwards;\r\n      @keyframes show{\r\n        from{opacity: .5;transform: scale(.5)}\r\n        to{opacity: 1;transform: scale(1)}\r\n      }\r\n      &:nth-child(1)::before{\r\n        content: \"置顶\";\r\n        position: absolute;\r\n        height: 20px;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        width: 74px;\r\n        background-color: #ff5722;\r\n        color: #fff;\r\n        transform: rotate(-45deg);\r\n        left: -18px;\r\n        top: 9px;\r\n      }\r\n      >h5{\r\n        line-height: 30px;\r\n        padding: 5px 130px 5px 0;\r\n        border-bottom: 1px solid #e8e9e7;\r\n        font-size: 18px;\r\n        font-weight: 400;\r\n        span{\r\n          font-size: 16px;\r\n          font-weight: 400;\r\n          display: inline-block;\r\n          vertical-align: bottom;\r\n          color: #2ea7e0;\r\n        }\r\n        a{\r\n          color: #000;\r\n          text-decoration: none;\r\n          &:hover{\r\n            color: #6bc30d;\r\n            text-decoration: underline;\r\n          }\r\n        }\r\n      }\r\n      .time{\r\n        width: 90px;\r\n        height: 70px;\r\n        font-family: SourceCodeProRegular,Menlo,Monaco,Consolas,\"Courier New\",monospace,'Helvetica Neue',Arial,sans-serif;\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 10px;\r\n        background-color: #fff;\r\n        padding: 0 20px 5px 20px;\r\n        line-height: 32px;\r\n        .date{\r\n          display: block;\r\n          text-align: center;\r\n          font-weight: 700;\r\n          font-size: 40px;\r\n          color: #6bc30d;\r\n          position: relative;\r\n          top: 2px;\r\n        }\r\n        .month{\r\n          display: inline-block;\r\n          color: #989997;\r\n          font-size: 18px;\r\n          span{\r\n            font-size: 14px;\r\n          }\r\n        }\r\n        .year{\r\n          display: inline-block;\r\n          color: #989997;\r\n          margin-left: 10px;\r\n          font-size: 18px;\r\n        }\r\n      }\r\n      .content{\r\n        margin-top: 20px;\r\n        line-height: 28px;\r\n        position: relative;\r\n        min-height: 200px;\r\n        a{\r\n          position: relative;\r\n          display: block;\r\n          overflow: hidden;\r\n          float: left;\r\n          width: 300px;\r\n          height: 180px;\r\n          border: 1px solid #e8e9e7;\r\n          margin-right: 20px;\r\n          background-position: center top;\r\n          background-size: cover;\r\n\r\n          i{\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            display: block;\r\n            width: 0;\r\n            height: 100%;\r\n            /*background-color: #fff;*/\r\n            transform: translateX(-40px) skew(-15deg);\r\n            box-shadow: 0 0 30px 20px rgba(255,255,255,.2);\r\n          }\r\n          &:hover i{\r\n            transition: transform .5s .5s;\r\n            transform: translateX(350px) skew(-15deg);\r\n          }\r\n        }\r\n      }\r\n      .read-more{\r\n        position: relative;\r\n        &::before{\r\n          content: \" \";\r\n          display: inline-block;\r\n          height: 1px;\r\n          top: 20px;\r\n          left: 100px;\r\n          right: 0;\r\n          position: absolute;\r\n          background-color: #d0d0d0;\r\n        }\r\n        a{\r\n          font-weight: bold;\r\n          color: #383937;\r\n          text-decoration: none;\r\n          border: none;\r\n          line-height: 40px;\r\n          &:hover{\r\n            color: #6bc30d;\r\n            text-decoration: underline;\r\n          }\r\n        }\r\n      }\r\n      .footer{\r\n        .fl{\r\n          float: left;\r\n          i{\r\n            font-size: 18px;\r\n            margin-right: 5px;\r\n            color: #666;\r\n          }\r\n          span{\r\n            display: inline-block;\r\n            font-size: 12px;\r\n            padding: 2px 5px;\r\n            background-color: #f1f2f0;\r\n            color: #787977;\r\n            margin: 2px;\r\n            text-decoration: none;\r\n            -webkit-transition: all .2s;\r\n            transition: all .2s;\r\n            &:hover{\r\n              color: #fff;\r\n              background: #6bc30d;\r\n            }\r\n          }\r\n        }\r\n        .fr{\r\n          float: right;\r\n          color: #666;\r\n          i{\r\n            font-style: normal;\r\n            margin-right: 12px;\r\n          }\r\n          .comment{\r\n            margin-left: 20px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    >.loading{\r\n      position: relative;\r\n      height: 42px;\r\n      background-color: #fff;\r\n      text-align: center;\r\n      span{\r\n        display: inline-block;\r\n        height: 42px;\r\n        line-height: 42px;\r\n        vertical-align: middle;\r\n      }\r\n      svg{\r\n        vertical-align: middle;\r\n        height: 42px;\r\n        width: 42px;\r\n        animation: loading-rotate 2s linear infinite;\r\n        circle{\r\n          animation: loading-dash 1.5s ease-in-out infinite;\r\n          stroke-dasharray: 90,150;\r\n          stroke-dashoffset: 0;\r\n          stroke-width: 2;\r\n          stroke: #409eff;\r\n          stroke-linecap: round;\r\n          color: black;\r\n        }\r\n      }\r\n      @keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}\r\n      @keyframes loading-rotate{to{transform:rotate(1turn)}}\r\n    }\r\n    >.no-more{\r\n      height: 30px;\r\n      line-height: 30px;\r\n      text-align: center;\r\n      background-color: #fff;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n</style>"]}]}